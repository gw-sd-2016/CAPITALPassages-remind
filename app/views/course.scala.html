@(form: Form[forms.AnnouncementForm], course: Course)
@main("Index") {
	<body>
		<br>
		<div class="row">
			<div class="large-5 medium-5 small-5 columns">
				<h1>Basic Economics</h1>
			</div>
			<a role="button" href="#" class="button semiround">Edit</a>
			<a role="button" href="#" class="button semiround alert">Delete</a>
		</div>

		@if(form.hasGlobalErrors) {
			<div class="alert alert-danger">
			@form.globalError.message
			</div>
		}
		
		<div class="row text-center" data-equalizer>
			<div class="large-3 medium-3 small-3 columns">
				<div class="panel callout radius" data-equalizer-watch>
					New Student Questions<br>
					<h3><a href="#">x</a></h3>
					<br>
				</div>
			</div>
			<div class="large-3 medium-3 small-3 columns">
				<div class="panel callout radius" data-equalizer-watch>
					Flagged Questions<br>
					<h3><a href="#">x</a></h3>
					<br>
				</div>
			</div>
			<div class="large-3 medium-3 small-3 columns">
				<div class="panel callout radius" data-equalizer-watch>
					Number of Students<br>
					<h3><a href="#">@User.getAllStudentsForCourse(course.id).size()</a></h3>
					<br>
				</div>
			</div>
			<div class="large-3 medium-3 small-3 columns" >
				<div class="panel callout radius" data-equalizer-watch>
					Course Ends in<br>
					<h3>@Course.calculateDaysRemainingForCourse(course).toInt</h3>
					days
				</div>
			</div>
		</div>
		<div class="row">
			<ul class="tabs vertical" data-tab>
				<li class="tab-title active"><a href="#panel11">Announcements</a></li>
				<li class="tab-title"><a href="#panel21">Modules</a></li>
				<li class="tab-title"><a href="#panel31">Students</a></li>
			</ul>
			<div class="tabs-content vertical">
				<div class="content active" id="panel11">

					<h2>Announcements</h2>
					<a role="button" data-reveal-id="createAnnouncementModal" class="button semiround">Create new Announcement</a>
					
					@*-------------------------*@
					@*CREATE ANNOUNCEMENT MODAL*@
					@*-------------------------*@
					<div id="createAnnouncementModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
						<div class="row">
							<form action="@routes.MessageController.createAnnouncement(course.id)" method="post" enctype="multipart/form-data">
								<div class="large-4 medium-4 small-4 small-centered columns">
									<h5>Message</h5>
									<textarea name="msg" value="@form("msg").value"></textarea>

									<div class="text-center">
										<button type="submit" class="button success semiround">Submit</button>
									</div>
								</div>
							</form>

						</div>
					</div>
					
					
					
					<table width="100%">
						<thead>
							<tr>
								<th width="20%">Release Date</th>
								<th width="55%">Description</th>
								<th width="25%">Actions</th>
							</tr>
						</thead>
						<tbody>
							@for(announcement <- Message.getAllAnnouncementsForCourse(course.id)) {
								<tr>
									<td>@announcement.createdTime</td>
									<td>@announcement.prompt.text</td>
									<td><a role="button" data-reveal-id="editAnnouncementModal" id="@announcement.id" class="button semiround">Edit</a>
										<a href="#" class="button semiround alert">Delete</a>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
				
				@*-------------------------*@
				@*EDIT ANNOUNCEMENT MODAL*@
				@*-------------------------*@
@*				TODO: get the edit announcement feature working*@
				<div id="editAnnouncementModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
					<div class="row">
						hello edit
						@*<form action="@routes.MessageController.editAnnouncement(announcement.id)" method="post" enctype="multipart/form-data">*@
							@*<div class="large-4 medium-4 small-4 small-centered columns">*@
								@*<h5>Message</h5>*@
								@*<textarea name="msg" value="@form("msg").value"></textarea>*@

								@*<div class="text-center">*@
									@*<button type="submit" class="button success semiround">Submit</button>*@
								@*</div>*@
							@*</div>*@
						@*</form>*@

					</div>
				</div>

				<div class="content" id="panel21">
					<p>
				<h2>Modules</h2>
					<p>
						<a role="button" href="#" class="button small semiround">Create new Module</a>
					</p>
					<div class="panel" width="100%">
						<ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
							@for(module <- Module.getAllModulesForCourse(course.id)) {
								<li>
									<div class="panel">
										<h4>Module @module.orderIndex</h4>
										<p>@Question.getAllQuestionsForModule(module).size() Questions</p>
										<a href="#" class="button semiround">Edit</a>
									</div>
								</li>
							}
						</ul>
					</div>
				</div>
				<div class="content" id="panel31">
					<p>
				<h2>Students</h2>
					<a role="button" href="#" class="button semiround">Manage Enrollment</a>
					</p>
					<ul class="tabs" data-tab>
						<li class="tab-title active"><a href="#panel1">Daily Progress</a></li>
						<li class="tab-title"><a href="#panel2">Evaluations (@Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Evaluation")).size())</a></li>
						<li class="tab-title"><a href="#panel3">Surveys (@Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Survey")).size())</a></li>
					</ul>
					<div class="tabs-content">
						<div class="content active" id="panel1">
							<table width="100%">
								<thead>
									<tr>
										<th width="300">Name</th>
										<th width="145">Points</th>
										<th>Level</th>
										<th width="150">Last Login</th>
									</tr>
								</thead>
								<tbody>
									@for(student <- User.getAllStudentsForCourse(course.id)) {
										<tr>
											<td><a href="@routes.UserController.showStudentProfilePage(student.username)">@student.firstName @student.lastName</td>
											<td>{points}</td>
											<td>{level}</td>
											<td>{last login}</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
						<div class="content" id="panel2">
							<table width="100%">
								<thead>
									<tr>
										<th width="300">Name</th>
										@for(module <- Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Evaluation"))) {
											<th width="145">x</th>
										}
									</tr>
								</thead>
								<tbody>
									@for(student <- User.getAllStudentsForCourse(course.id)) {
										<tr>
											<td><a href="@routes.UserController.showStudentProfilePage(student.username)">@student.firstName @student.lastName</td>
											@for(module <- Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Evaluation"))) {
												<td>{score}</td>
											}
										</tr>
									}
								</tbody>
							</table>
						</div>
						<div class="content" id="panel3">
							<table width="100%">
								<thead>
									<tr>
										<th width="300">Name</th>
										@for(module <- Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Survey"))) {
											<th width="145">x</th>
										}
									</tr>
								</thead>
								<tbody>
									@if(Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Survey")).size() <= 0) {
										<tr><td>(No surveys for this course)</td></tr>
									} else {
										@for(student <- User.getAllStudentsForCourse(course.id)) {
											<tr>
												<td><a href="@routes.UserController.showStudentProfilePage(student.username)">@student.firstName @student.lastName</td>
												@for(module <- Module.getAllModulesForCourseByType(course.id, Module.Type.getType("Survey"))) {
													<th width="145">x</th>
												}
											</tr>
										}
									}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../js/vendor/jquery.js"></script>
		<script src="../js/foundation.min.js"></script>
		<script>
         $(document).foundation();
      </script>
	</body>
}